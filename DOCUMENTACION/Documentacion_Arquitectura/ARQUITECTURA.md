# ğŸ—ï¸ Arquitectura del Proyecto

## Diagrama General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USUARIO EN NAVEGADOR                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ FRONTEND (HTML, CSS, JavaScript)
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   APLICACIÃ“N WEB (index.html)           â”‚
    â”‚                                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  PÃ¡gina de AutenticaciÃ³n        â”‚   â”‚
    â”‚  â”‚  - Login                        â”‚   â”‚
    â”‚  â”‚  - Registro                     â”‚   â”‚
    â”‚  â”‚  - ValidaciÃ³n de credenciales   â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  PÃ¡gina de Perfil               â”‚   â”‚
    â”‚  â”‚  - Editar nombre                â”‚   â”‚
    â”‚  â”‚  - Cambiar contraseÃ±a           â”‚   â”‚
    â”‚  â”‚  - Personalizar fondo           â”‚   â”‚
    â”‚  â”‚  - Cerrar sesiÃ³n âœ…             â”‚   â”‚
    â”‚  â”‚  - Eliminar cuenta              â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ API REST (JSON)
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   BACKEND (Node.js + Express)           â”‚
    â”‚   server.js                             â”‚
    â”‚                                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  Rutas API                      â”‚   â”‚
    â”‚  â”‚  POST   /api/auth/register      â”‚   â”‚
    â”‚  â”‚  POST   /api/auth/login         â”‚   â”‚
    â”‚  â”‚  GET    /api/profile/:id        â”‚   â”‚
    â”‚  â”‚  PUT    /api/profile/:id        â”‚   â”‚
    â”‚  â”‚  DELETE /api/profile/:id        â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  AutenticaciÃ³n                  â”‚   â”‚
    â”‚  â”‚  - EncriptaciÃ³n bcryptjs        â”‚   â”‚
    â”‚  â”‚  - ValidaciÃ³n de credenciales   â”‚   â”‚
    â”‚  â”‚  - Control de sesiones          â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ SQL Queries (Encriptado TLS)
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   AZURE SQL DATABASE                   â”‚
    â”‚   (Base de Datos en Nube)              â”‚
    â”‚                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  Tabla: Usuarios                â”‚   â”‚
    â”‚  â”‚  - ID                           â”‚   â”‚
    â”‚  â”‚  - Nombre                       â”‚   â”‚
    â”‚  â”‚  - Usuario (Ãºnico)              â”‚   â”‚
    â”‚  â”‚  - ContraseÃ±a (encriptada)      â”‚   â”‚
    â”‚  â”‚  - Fondo                        â”‚   â”‚
    â”‚  â”‚  - FechaRegistro                â”‚   â”‚
    â”‚  â”‚  - FechaActualizacion           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flujo de AutenticaciÃ³n

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PÃ¡gina de Login   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Usuario ingresa    â”‚
                    â”‚  credenciales       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Validar en cliente â”‚ (JS)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Enviar POST        â”‚
                    â”‚  /api/auth/login    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Backend verifica   â”‚
                    â”‚  en Base de Datos   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  âœ… VÃ¡lido         â”‚          â”‚  âŒ InvÃ¡lido       â”‚
    â”‚  Devuelve usuario  â”‚          â”‚  Devuelve error    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Guardar sesiÃ³n    â”‚          â”‚  Mostrar alerta    â”‚
    â”‚  en localStorage   â”‚          â”‚  "Credenciales"    â”‚
    â”‚                    â”‚          â”‚  "incorrectas"     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Mostrar pÃ¡gina    â”‚
    â”‚  de Perfil         â”‚
    â”‚  del usuario       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flujo de Cierre de SesiÃ³n

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Usuario en Perfil       â”‚
        â”‚  [Cerrar sesiÃ³n] ğŸ”´      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Click
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Ejecutar cerrarSesion() â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Limpiar localStorage:   â”‚
        â”‚  - usuarioActual         â”‚
        â”‚  - Otros datos de sesiÃ³n â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Resetear formularios    â”‚
        â”‚  - formLogin             â”‚
        â”‚  - formRegistro          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Ocultar pÃ¡gina de perfilâ”‚
        â”‚  Mostrar pÃ¡gina de login â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Scroll a inicio          â”‚
        â”‚  Enfoque en login         â”‚
        â”‚  (Usuario listo para      â”‚
        â”‚   volver a iniciar)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Estructura de Componentes

### Frontend (Cliente)
```
index.html
â”œâ”€â”€ paginaAuth (display: flex por defecto)
â”‚   â”œâ”€â”€ contenedor
â”‚   â”‚   â”œâ”€â”€ h1 "Sistema de Usuarios"
â”‚   â”‚   â”œâ”€â”€ switch-pill (Login/Registro)
â”‚   â”‚   â”œâ”€â”€ panelLogin (form)
â”‚   â”‚   â”‚   â”œâ”€â”€ usuario
â”‚   â”‚   â”‚   â”œâ”€â”€ password
â”‚   â”‚   â”‚   â””â”€â”€ button submit
â”‚   â”‚   â””â”€â”€ panelRegistro (form)
â”‚   â”‚       â”œâ”€â”€ nombre
â”‚   â”‚       â”œâ”€â”€ usuario
â”‚   â”‚       â”œâ”€â”€ password
â”‚   â”‚       â”œâ”€â”€ color picker
â”‚   â”‚       â””â”€â”€ button submit
â”‚   â”‚
â”‚   â””â”€â”€ Estilos: .contenedor, .switch-pill, .panel
â”‚
â””â”€â”€ paginaPerfil (display: none por defecto)
    â”œâ”€â”€ perfil-header
    â”‚   â”œâ”€â”€ h1 nombrePerfil
    â”‚   â””â”€â”€ button "Cerrar sesiÃ³n"
    â”‚
    â”œâ”€â”€ perfil-contenedor
    â”‚   â””â”€â”€ perfil-card
    â”‚       â”œâ”€â”€ perfil-info
    â”‚       â”‚   â”œâ”€â”€ usuario (lectura)
    â”‚       â”‚   â”œâ”€â”€ nombre (editable)
    â”‚       â”‚   â”œâ”€â”€ password (editable)
    â”‚       â”‚   â”œâ”€â”€ color picker
    â”‚       â”‚   â””â”€â”€ input fondo (editable)
    â”‚       â”‚
    â”‚       â””â”€â”€ perfil-botones
    â”‚           â”œâ”€â”€ Guardar cambios
    â”‚           â”œâ”€â”€ Eliminar cuenta
    â”‚           â””â”€â”€ (Cerrar sesiÃ³n arriba)
    â”‚
    â””â”€â”€ Estilos: .perfil-header, .btn-cerrar-sesion, etc.
```

### Backend (Servidor)
```
server.js
â”œâ”€â”€ ConfiguraciÃ³n
â”‚   â”œâ”€â”€ Express
â”‚   â”œâ”€â”€ CORS
â”‚   â”œâ”€â”€ SQL Connection Pool
â”‚   â””â”€â”€ Middlewares
â”‚
â”œâ”€â”€ Rutas API
â”‚   â”œâ”€â”€ /api/auth/register (POST)
â”‚   â”œâ”€â”€ /api/auth/login (POST)
â”‚   â”œâ”€â”€ /api/profile/:userId (GET, PUT, DELETE)
â”‚   â””â”€â”€ /health (GET)
â”‚
â”œâ”€â”€ Funciones Auxiliares
â”‚   â”œâ”€â”€ connectDB()
â”‚   â”œâ”€â”€ hashPassword()
â”‚   â”œâ”€â”€ verifyPassword()
â”‚   â””â”€â”€ Validaciones
â”‚
â””â”€â”€ Manejo de Errores
    â”œâ”€â”€ Try/Catch
    â”œâ”€â”€ Logs
    â””â”€â”€ Respuestas HTTP estÃ¡ndar
```

---

## Flujo de Datos - Registro

```
1. FRONTEND (Cliente)
   Usuario escribe en formulario
   â”œâ”€ Nombre
   â”œâ”€ Usuario
   â”œâ”€ ContraseÃ±a
   â””â”€ Fondo (color o URL)

2. VALIDACIÃ“N CLIENTE
   âœ“ Campos no vacÃ­os
   âœ“ Formato vÃ¡lido
   âœ“ Usuario no existe (local)

3. ENVÃO
   POST /api/auth/register
   {
     "nombre": "Juan",
     "usuario": "juan123",
     "password": "segura",
     "fondo": "#FF5733"
   }

4. BACKEND
   âœ“ Recibe datos
   âœ“ Valida campos
   âœ“ Verifica usuario Ãºnico en BD
   âœ“ Encripta contraseÃ±a (bcryptjs)
   âœ“ Inserta en BD

5. RESPUESTA
   {
     "success": true,
     "message": "Usuario registrado"
   }

6. FRONTEND
   âœ“ Muestra confirmaciÃ³n
   âœ“ Limpia formulario
   âœ“ Redirige a Login
```

---

## Flujo de Datos - Guardar Cambios

```
1. FRONTEND
   Usuario edita en pÃ¡gina de perfil
   â”œâ”€ Nombre: "Nuevo Nombre"
   â”œâ”€ ContraseÃ±a: "nueva123"
   â””â”€ Fondo: "https://imagen.jpg"

2. VALIDACIÃ“N
   âœ“ Datos vÃ¡lidos
   âœ“ Cambios realizados

3. CLIC "Guardar cambios"
   PUT /api/profile/123
   {
     "nombre": "Nuevo Nombre",
     "password": "nueva123",
     "fondo": "https://imagen.jpg"
   }

4. BACKEND
   âœ“ Verifica usuario existe
   âœ“ Encripta contraseÃ±a (nueva)
   âœ“ Actualiza campos en BD
   âœ“ Actualiza timestamp

5. RESPUESTA
   {
     "success": true,
     "message": "Perfil actualizado"
   }

6. FRONTEND
   âœ“ Actualiza localStorage
   âœ“ Recarga datos en pÃ¡gina
   âœ“ Muestra confirmaciÃ³n
   âœ“ Aplica nuevo fondo visualmente
```

---

## Base de Datos - Tabla Usuarios

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TABLA: Usuarios                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Campo               â”‚ Tipo         â”‚ RestricciÃ³n            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ID                  â”‚ INT          â”‚ PRIMARY KEY, IDENTITY  â”‚
â”‚ Nombre              â”‚ NVARCHAR(100)â”‚ NOT NULL               â”‚
â”‚ Usuario             â”‚ NVARCHAR(50) â”‚ NOT NULL, UNIQUE       â”‚
â”‚ ContraseÃ±a          â”‚ NVARCHAR(255)â”‚ NOT NULL (encriptada)  â”‚
â”‚ Fondo               â”‚ NVARCHAR(MAX)â”‚ Nullable               â”‚
â”‚ FechaRegistro       â”‚ DATETIME     â”‚ DEFAULT GETDATE()      â”‚
â”‚ FechaActualizacion  â”‚ DATETIME     â”‚ DEFAULT GETDATE()      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ÃNDICES:                                                    â”‚
â”‚ - Clustered Index en ID (PRIMARY KEY)                       â”‚
â”‚ - Non-Clustered Index en Usuario (bÃºsqueda rÃ¡pida)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EJEMPLO DE DATOS:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚ Nombre     â”‚ Usuario  â”‚ ContraseÃ±a (hash)      â”‚ Fondo               â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Juan PÃ©rez â”‚ juan123  â”‚ $2a$10$... (bcrypt)   â”‚ #FF5733             â”‚
â”‚ 2  â”‚ MarÃ­a LÃ³pezâ”‚ maria_l  â”‚ $2a$10$... (bcrypt)   â”‚ https://imagen.jpg  â”‚
â”‚ 3  â”‚ Carlos R.  â”‚ carlos99 â”‚ $2a$10$... (bcrypt)   â”‚ #1877f2             â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Despliegue en Azure - Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AZURE SUBSCRIPTION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ App Service      â”‚        â”‚ Azure SQL DB     â”‚     â”‚
â”‚  â”‚ (Frontend + API) â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚ (Datos seguros)  â”‚     â”‚
â”‚  â”‚ - Linux          â”‚        â”‚ - Firewall       â”‚     â”‚
â”‚  â”‚ - Node.js        â”‚        â”‚ - Backups auto   â”‚     â”‚
â”‚  â”‚ - 80/443         â”‚        â”‚ - SSL/TLS        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                               â”‚
â”‚         â”‚ Git Push                                       â”‚
â”‚         â”‚                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ App Service Plan â”‚                                  â”‚
â”‚  â”‚ (F1 - Gratuito)  â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Key Vault (Secretos)                        â”‚      â”‚
â”‚  â”‚ - DB Connection String                      â”‚      â”‚
â”‚  â”‚ - API Keys                                  â”‚      â”‚
â”‚  â”‚ - Certificados                              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Application Insights (Monitoreo)            â”‚      â”‚
â”‚  â”‚ - Logs                                      â”‚      â”‚
â”‚  â”‚ - MÃ©tricas                                  â”‚      â”‚
â”‚  â”‚ - Alertas                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Seguridad - Capas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Capa 1: CLIENTE                     â”‚
â”‚ â”œâ”€ HTTPS (Cifrado en trÃ¡nsito)      â”‚
â”‚ â”œâ”€ CSP (Content Security Policy)    â”‚
â”‚ â””â”€ ValidaciÃ³n JavaScript            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Capa 2: RED                         â”‚
â”‚ â”œâ”€ CORS (Control de origen)         â”‚
â”‚ â”œâ”€ Firewall de App Service          â”‚
â”‚ â””â”€ DDoS Protection                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Capa 3: API                         â”‚
â”‚ â”œâ”€ ValidaciÃ³n de entrada            â”‚
â”‚ â”œâ”€ Escape de SQL (Prepared Stmts)   â”‚
â”‚ â”œâ”€ Rate limiting                    â”‚
â”‚ â””â”€ Logging de accesos               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Capa 4: BASE DE DATOS               â”‚
â”‚ â”œâ”€ EncriptaciÃ³n bcryptjs            â”‚
â”‚ â”œâ”€ SQL Server Authentication        â”‚
â”‚ â”œâ”€ Firewall de BD                   â”‚
â”‚ â”œâ”€ Private Endpoints                â”‚
â”‚ â””â”€ Backups encriptados              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PrÃ³xima AcciÃ³n

ğŸ“‹ **Seguir guÃ­a:** `GUIA_DESPLIEGUE_AZURE.md`

```bash
# 1. Crear recursos en Azure
az group create --name rg-usuarios-app --location eastus

# 2. Crear App Service
az appservice plan create ...

# 3. Desplegar cÃ³digo
git push azure main
```

---

**Fin del Diagrama de Arquitectura**
